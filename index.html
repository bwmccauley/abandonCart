<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Glitch Store</title>
<style>
  body {
    background-color: black;
    color: white;
    font-family: monospace;
    text-align: center;
    overflow-x: hidden;
  }
  .item {
    display: inline-block;
    margin: 20px;
    border: 2px solid white;
    padding: 10px;
    width: 200px;
    background: rgba(255, 255, 255, 0.02);
    box-shadow: 0 0 10px red;
    animation: flicker 2s infinite;
  }
  .item img {
    width: 100%;
    filter: url(#glitch);
    transition: filter 0.3s, transform 0.2s;
  }
  .item img:hover {
    filter: contrast(200%) hue-rotate(90deg) saturate(2);
    transform: scale(1.05) rotate(-2deg);
  }
  button {
    background: transparent;
    color: white;
    border: 1px solid white;
    padding: 5px 10px;
    cursor: pointer;
    transition: background 0.3s, color 0.3s;
  }
  button:hover {
    background: white;
    color: black;
  }
  @keyframes flicker {
    0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
      box-shadow: 0 0 10px red;
    }
    20%, 24%, 55% {
      box-shadow: 0 0 2px red;
    }
  }
</style>
</head>
<body>
<h1>Welcome to the Glitch Store</h1>
<div id="store"></div>
<svg width="0" height="0">
  <filter id="glitch">
    <feTurbulence type="fractalNoise" baseFrequency="0.01" numOctaves="3" result="turb" />
    <feDisplacementMap in="SourceGraphic" in2="turb" scale="10" />
  </filter>
</svg>
<script>
const storeElement = document.getElementById('store');
const items = [
  {name: 'Rusty Key', img: 'https://source.unsplash.com/200x200/?michigan,abandoned'},
  {name: 'Foggy Lighthouse', img: 'https://source.unsplash.com/200x200/?lighthouse,fog,michigan'},
  {name: 'Great Lakes Storm', img: 'https://source.unsplash.com/200x200/?great-lakes,storm,michigan'},
  {name: 'Misty Forest', img: 'https://source.unsplash.com/200x200/?forest,misty,michigan'},
  {name: 'Urban Decay', img: 'https://source.unsplash.com/200x200/?rust-belt,decay,michigan'}
];
let secretSequence = shuffle([...Array(items.length).keys()]);
let progress = 0;

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function renderStore() {
  storeElement.innerHTML = '';
  items.forEach((item, index) => {
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `<img src="${item.img}" alt="${item.name}"><h3>${item.name}</h3><button onclick="buyItem(${index})">Buy</button>`;
    storeElement.appendChild(div);
  });
}

function buyItem(index) {
  if (index === secretSequence[progress]) {
    progress++;
    if (progress === secretSequence.length) {
      alert('You unlocked the backroom...');
    }
  } else {
    progress = 0;
    alert('Sequence failed. Try again.');
  }
}

renderStore();
</script>
</body>
</html>
