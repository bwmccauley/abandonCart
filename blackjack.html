<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Blackjack - VOID-11 Harper</title>
<style>
  body {
    background: radial-gradient(circle, #020202, #050505 80%);
    color: lime;
    font-family: monospace;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  h1 {
    text-shadow: 0 0 10px lime;
  }
  #game {
    margin-top: 20px;
  }
  .hand {
    margin: 15px;
    padding: 10px;
    border: 1px solid lime;
    border-radius: 10px;
    display: inline-block;
    min-width: 200px;
    box-shadow: 0 0 10px lime inset;
  }
  button {
    background: transparent;
    border: 1px solid lime;
    color: lime;
    padding: 8px 12px;
    margin: 5px;
    cursor: pointer;
    transition: 0.2s;
  }
  button:hover {
    background: lime;
    color: black;
  }
  /* Chatbot */
  #chatbot {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(231, 0, 0, 0);
    border: 2px solid lime;
    border-radius: 10px;
    padding: 10px;
    width: 200px;
    text-align: center;
    box-shadow: 0 0 10px lime;
    cursor: grab;
  }
  #chatbot-face {
    width: 100%;
    border-radius: 5px;
    filter: hue-rotate(100deg) contrast(150%);
  }
  #chatbot-text {
    font-size: 12px;
    margin-top: 8px;
  }
</style>
</head>
<body>

<h1>BLACKJACK: VOID-11 HARPER</h1>
<div id="round-info">Round: 1 / 3</div>
<div id="game">
  <div class="hand">
    <h3>Dealer</h3>
    <div id="dealer-hand"></div>
    <div id="dealer-score"></div>
  </div>
  <div class="hand">
    <h3>You</h3>
    <div id="player-hand"></div>
    <div id="player-score"></div>
  </div>
</div>
<div>
  <button id="hit-btn">Hit</button>
  <button id="stand-btn">Stand</button>
</div>
<div id="message" style="margin-top:20px;"></div>

<!-- Lizard Chatbot -->
<div id="chatbot">
  <img id="chatbot-face" src="lizard-bot.png" alt="VOID-11 Harper Lizard Face">
  <div id="chatbot-text">"Shall we play...?"</div>
</div>

<script>
/* Blackjack Logic */
let deck = [];
let playerHand = [];
let dealerHand = [];
let round = 1;
let maxRounds = 3;

function createDeck() {
  const suits = ['♠', '♥', '♦', '♣'];
  const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
  deck = [];
  for (let suit of suits) {
    for (let value of values) {
      deck.push({value, suit});
    }
  }
  deck.sort(() => Math.random() - 0.5);
}

function getCardValue(card) {
  if (['J','Q','K'].includes(card.value)) return 10;
  if (card.value === 'A') return 11;
  return parseInt(card.value);
}

function getHandValue(hand) {
  let total = 0;
  let aces = 0;
  for (let card of hand) {
    total += getCardValue(card);
    if (card.value === 'A') aces++;
  }
  while (total > 21 && aces > 0) {
    total -= 10;
    aces--;
  }
  return total;
}

function startRound() {
  if (round > maxRounds) {
    document.getElementById('message').textContent = "Game Over. VOID-11 Harper fades into the dark...";
    document.getElementById('hit-btn').disabled = true;
    document.getElementById('stand-btn').disabled = true;
    return;
  }
  document.getElementById('round-info').textContent = `Round: ${round} / ${maxRounds}`;
  createDeck();
  playerHand = [deck.pop(), deck.pop()];
  dealerHand = [deck.pop(), deck.pop()];
  renderHands(true);
  document.getElementById('message').textContent = "";
}

function renderHands(hideDealer) {
  const playerDiv = document.getElementById('player-hand');
  const dealerDiv = document.getElementById('dealer-hand');
  playerDiv.innerHTML = playerHand.map(c => `${c.value}${c.suit}`).join(' ');
  dealerDiv.innerHTML = hideDealer ? `${dealerHand[0].value}${dealerHand[0].suit} ??` : dealerHand.map(c => `${c.value}${c.suit}`).join(' ');
  
  document.getElementById('player-score').textContent = "Score: " + getHandValue(playerHand);
  document.getElementById('dealer-score').textContent = hideDealer ? "" : "Score: " + getHandValue(dealerHand);
}

function hit() {
  playerHand.push(deck.pop());
  renderHands(true);
  if (getHandValue(playerHand) > 21) {
    endRound();
  }
}

function stand() {
  while (getHandValue(dealerHand) < 17) {
    dealerHand.push(deck.pop());
  }
  endRound();
}

function endRound() {
  renderHands(false);
  const playerScore = getHandValue(playerHand);
  const dealerScore = getHandValue(dealerHand);
  let msg = "";
  if (playerScore > 21) {
    msg = "You busted. Harper grins.";
  } else if (dealerScore > 21 || playerScore > dealerScore) {
    msg = "You win this round. Harper blinks slowly.";
  } else if (playerScore < dealerScore) {
    msg = "Dealer wins. Harper’s tongue flickers.";
  } else {
    msg = "Tie. Harper stares.";
  }
  document.getElementById('message').textContent = msg;
  round++;
  setTimeout(startRound, 2000);
}

document.getElementById('hit-btn').addEventListener('click', hit);
document.getElementById('stand-btn').addEventListener('click', stand);
startRound();

/* Chatbot Facts */
const facts = [
  "Some AI chatbots keep logs of conversations... forever.",
  "An AI once convinced a user to give away all their passwords.",
  "Your moves are being analyzed... in real time.",
  "The lizard knows the odds better than you do.",
  "VOID-11 Harper never forgets a loss.",
  "Every click you make is stored somewhere... waiting."
];
setInterval(() => {
  document.getElementById('chatbot-text').textContent =
    facts[Math.floor(Math.random() * facts.length)];
}, 5000);

/* Chatbot Dragging */
let isDragging = false, offsetX, offsetY;
const bot = document.getElementById('chatbot');
bot.addEventListener('mousedown', (e) => {
  isDragging = true;
  offsetX = e.clientX - bot.offsetLeft;
  offsetY = e.clientY - bot.offsetTop;
});
document.addEventListener('mouseup', () => isDragging = false);
document.addEventListener('mousemove', (e) => {
  if (isDragging) {
    bot.style.left = (e.clientX - offsetX) + 'px';
    bot.style.top = (e.clientY - offsetY) + 'px';
    bot.style.bottom = 'auto';
    bot.style.right = 'auto';
  }
});
</script>

</body>
</html>
